{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="container py-4" style="font-family: 'Prompt', sans-serif;">
    <h1 class="text-center mb-4" style="color: #9e2a2f;" id="search-title">Search Reservation</h1>

    <form method="GET" action="{% url 'search_application' %}" class="input-group mb-4 shadow-sm" id="search-form">
        <input type="text" name="q" value="{{ query }}" class="form-control rounded-start-pill" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á (YYYY-MM-DD)">
        <button type="submit" class="btn btn-danger rounded-end-pill px-4">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </form>

    {% if applications %}
    <div class="alert alert-success shadow-sm rounded-3" id="search-count">
        ‡∏û‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {{ applications|length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    </div>

    <div class="table-responsive shadow-lg rounded-4" id="result-table">
        <table class="table table-bordered table-hover align-middle text-center mb-0">
            <thead class="table-danger">
                <tr>
                    <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                    <th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                    <th>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</th>
                    <th>‡πÄ‡∏°‡∏ô‡∏π</th>
                    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á</th>
                    <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á</th>
                    <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
            </thead>
            <tbody>
                {% for application in applications %}
                <tr>
                    <td>{{ application.first_name }} {{ application.last_name }}</td>
                    <td>{{ application.email }}</td>
                    <td>{{ application.phone_number }}</td>
                    <td>{{ application.set_food }}</td>
                    <td>{{ application.booking_date|date:"d/m/Y" }}</td>
                    <td>{{ application.booking_time }}</td>
                    <td>
                        <a href="{% url 'edit_application' application.pk %}" class="btn btn-warning btn-sm rounded-3">
                            ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </a>
                        <a href="{% url 'delete_application' application.pk %}" class="btn btn-outline-danger btn-sm rounded-3"
                           onclick="return confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">
                            üóëÔ∏è ‡∏•‡∏ö
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% else %}
        <div class="alert alert-warning text-center mt-4 shadow-sm rounded-3" id="no-result">
            ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "<strong>{{ query }}</strong>"
        </div>
    {% endif %}
</div>

<!-- ScrollReveal CDN (‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô base.html) -->
<script src="https://unpkg.com/scrollreveal"></script>

<!-- ScrollReveal Animation -->
<script>
    ScrollReveal().reveal('#search-title', {
        delay: 100,
        duration: 800,
        origin: 'top',
        distance: '30px',
        opacity: 0,
        easing: 'ease-in-out'
    });

    ScrollReveal().reveal('#search-form', {
        delay: 300,
        duration: 1000,
        origin: 'top',
        distance: '40px',
        opacity: 0,
        easing: 'ease-in-out'
    });

    ScrollReveal().reveal('#search-count', {
        delay: 500,
        duration: 1000,
        origin: 'top',
        distance: '40px',
        opacity: 0
    });

    ScrollReveal().reveal('#result-table', {
        delay: 600,
        duration: 1000,
        origin: 'bottom',
        distance: '60px',
        opacity: 0
    });

    ScrollReveal().reveal('#no-result', {
        delay: 500,
        duration: 1000,
        origin: 'bottom',
        distance: '40px',
        opacity: 0
    });
</script>
{% endblock %}
